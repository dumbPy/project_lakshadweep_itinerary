---


---

<h1 id="project-lakshadweep-itinerary">Project Lakshadweep Itinerary</h1>
<h2 id="introduction">Introduction</h2>
<p><a href="https://en.wikipedia.org/wiki/Lakshadweep">Lakshadweep</a> is a group of islands off south western coast of India, and has a lots of scenic and <a href="https://www.google.co.in/search?q=lakshadweep&amp;source=lnms&amp;tbm=isch">Beautiful Untouched Beaches</a> and <a href="https://www.google.co.in/search?q=lakshadweep+Lagoons&amp;source=lnms&amp;tbm=isch">Lagoons</a> worth exploring. The Islands are open to Tourists under permit from the Administrative Officer (<a href="mailto:lk-secadm@nic.in">email</a>). The mode of transport however, is limited to Govt. operated Ships that mainly ply between Mainland India (Kochi and Mangalore port) and the islands of Lakshadweep. The prime purpose of these Ships is to satisfy the needs of the Islanders that depend solely on supplies from Mainland India. Hence, the Ship Schedule is mostly dependent on the Cargo needs of each Island and is prepared fresh every month and frequency is very low. The seat availability is very limited and gets filled within a couple of days of Ship Schedule announcement for any given month.<br>
There is a Daily Flight from <a href="https://www.google.co.in/search?q=kochi+to+agatti">Kochi to Agatti</a> operated by Air India, but the inter-Island transport is again limited to the same above Ships. The same ships are also used by the Islanders for transport, causing a stable internal demand for these limited seats.<br>
Hence the need to come up with a suitable Itinerary planning method was felt by the author, and gave rise to this project.</p>
<p>This project deals with <strong>Directed Graph</strong> implementation of<br>
<strong>Mainland(India) &lt;–&gt; Lakshadweep</strong> Sea Transport Network and Itinerary planning from this Graph.</p>
<h2 id="ship-schedule">Ship Schedule</h2>
<p>Each Month, the Lakshadweep Administration publishes a new Schedule for these ships. An example of this schedule can be found below:<br>
<img src="https://lh3.googleusercontent.com/2z8Vtmrg6Of5LPXO3wk0phR5nMl1Gt5PdncvPvY62u1VOy0Dp76HLTU9poiXZH91FP6-7Z9mFh0=s1440" alt="Sample Ship Schedule"></p>
<p>Manual Itinerary Planning based on above schedule is hard and will surely lead to missing a lot of possible travel options that are hard to spot in the above jumbled schedule. A small example can be found below:</p>
<p><img src="https://lh3.googleusercontent.com/Q2C6RoqyVIqVJ7RT1xCeNcH_rLpOfrBGkMkqrKD7of32HLaqmGbOXc86yWbJYhgDqofIWaJ2Obg=s1440" alt="Manual itinerary"></p>
<h2 id="steps-before-running-the-code">Steps before running the code</h2>
<h3 id="extracting-the-above-ship-schedule-manually.">Extracting the above Ship Schedule manually.</h3>
<p>The <a href="http://lakport.nic.in">Ship Schedule</a> is captcha and text selection protected and hence the need to get the latest schedule manually as shown below.</p>
<ol>
<li>Go the <a href="http://lakport.nic.in">Home Page</a> and click <em><strong>Ship Schedule</strong></em></li>
<li>Select <em>All Passenger Ships</em> and Enter Captcha, but do not click <em>View</em> yet.</li>
<li>Right Click on the page and click <em>Inspect</em> and go to <em>Network Tab</em></li>
<li>Now click <em>View</em> and you will find some files appearing in <em>Network</em> tab as a response to you clicking <em>View</em></li>
<li>select the first file <em>ship_online_programme.aspx</em> and open the <em>Response</em> sub Tab just beside it to see the HTML code of the above response.</li>
<li>Hit <em>ctrl+a</em> to <em>select all</em> the HTML response code and copy it and paste it in a text editor an save it as a &lt;name&gt;.html file. This HTML file contains the page with the required Schedule.</li>
</ol>
<p>The Code will extract the required Schedule Table from the above HTML file, but remember to change this HTML file’s name properly in the code.</p>
<h2 id="methodology">Methodology</h2>
<h3 id="laymans">Layman’s:</h3>
<div class="mermaid"><svg xmlns="http://www.w3.org/2000/svg" id="mermaid-svg-bBDyg5xU6DkygPhq" height="100%" viewBox="0 0 383.203125 517.5" style="max-width:383.203125px;"><g><g class="output"><g class="clusters"></g><g class="edgePaths"><g class="edgePath" style="opacity: 1;"><path class="path" d="M181.6015625,72.5L181.6015625,113.75L181.6015625,155" marker-end="url(#arrowhead3719)" style="fill:none"></path><defs><marker id="arrowhead3719" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M181.6015625,207.5L181.6015625,248.75L181.6015625,290" marker-end="url(#arrowhead3720)" style="fill:none"></path><defs><marker id="arrowhead3720" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M181.6015625,342.5L181.6015625,383.75L181.6015625,425" marker-end="url(#arrowhead3721)" style="fill:none"></path><defs><marker id="arrowhead3721" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g></g><g class="edgeLabels"><g class="edgeLabel" transform="translate(181.6015625,113.75)" style="opacity: 1;"><g transform="translate(-137.578125,-16.25)" class="label"><foreignObject width="275.15625" height="32.5"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">{'ship': 'Corals'} 0 days 21:00:00</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(181.6015625,248.75)" style="opacity: 1;"><g transform="translate(-129.75,-16.25)" class="label"><foreignObject width="259.51171875" height="32.5"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">{'ship': None} 0 days 07:00:00</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(181.6015625,383.75)" style="opacity: 1;"><g transform="translate(-161.6015625,-16.25)" class="label"><foreignObject width="323.203125" height="32.5"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">{'ship': 'Arabian Sea'} 0 days 15:00:00</span></div></foreignObject></g></g></g><g class="nodes"><g class="node" id="id1" transform="translate(181.6015625,46.25)" style="opacity: 1;"><rect rx="5" ry="5" x="-133.421875" y="-26.25" width="266.84375" height="52.5"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-123.421875,-16.25)"><foreignObject width="246.85546875" height="32.5"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Kochi 2018-03-18 13:00:00</div></foreignObject></g></g></g><g class="node" id="id2" transform="translate(181.6015625,181.25)" style="opacity: 1;"><rect rx="5" ry="5" x="-148.171875" y="-26.25" width="296.34375" height="52.5"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-138.171875,-16.25)"><foreignObject width="276.34765625" height="32.5"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Kavaratti 2018-03-19 10:00:00</div></foreignObject></g></g></g><g class="node" id="id3" transform="translate(181.6015625,316.25)" style="opacity: 1;"><rect rx="5" ry="5" x="-148.171875" y="-26.25" width="296.34375" height="52.5"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-138.171875,-16.25)"><foreignObject width="276.34765625" height="32.5"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Kavaratti 2018-03-19 17:00:00</div></foreignObject></g></g></g><g class="node" id="id4" transform="translate(181.6015625,451.25)" style="opacity: 1;"><rect rx="5" ry="5" x="-133.421875" y="-26.25" width="266.84375" height="52.5"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-123.421875,-16.25)"><foreignObject width="246.85546875" height="32.5"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Kochi 2018-03-20 08:00:00</div></foreignObject></g></g></g></g></g></g></svg></div>
<p>Above Network shows Travel and Stay as Edges with related Data. Note: <em>‘ship’:None</em> represents Stay at the island representing same Island by two different nodes at two different timing.</p>
<h3 id="technical">Technical</h3>
<p>(You may neglect this part)<br>
<a href="https://networkx.github.io/documentation/latest/"><strong>NetworkX</strong></a> Library was used for making Graph. The library accepts any class object as node, and hence a class <em>locationNode</em> was defined with inner attributes <em>location</em> and <em>timestamp</em>. Instances of this class <em>locationNode</em> were used to represent Nodes in the graphs and the inner attributes can be accessed as <em>node.location</em> and <em>node.timestamp</em> for any <em>node</em> instance.</p>
<p>A new <em><strong>add_node(Graph, node)</strong></em> function was defined to add nodes to graph G, rather than using the Graph’s internal function <em>G.add_node</em> as the internal function considers any two exact same instances of the class <em>nodeLocation</em> as different based on their different memory location rather than comparing their internal attributes.</p>
<p>Edges between any two <em>nodes</em> have <em>ship</em> defined for it. In case of <em>travel edge</em> (Directed edge representing travelling between two nodes) <em>ship</em> is set to the <em>ship of travel</em>, and in case of <em>stay edge</em>, <em>ship</em> is set to <em>None.</em></p>
<p><em><strong>find_n_routes(Graph, source, destination, max_n_routes)</strong></em> was defined to find maximum n routes between <em>source</em> and <em>destination</em> in any  order. If <em>destination</em> is not defined, the <em>source</em> and <em>destination</em> are  considered same. The function returns a list of itineraries with each itinerary consisting a list of <em>locationNode</em> s that are then used to reconstruct the paths of each itinerary.<br>
<em><strong>print_routes()</strong></em> function defined is used to print all the routes/itineraries returned by the <em>find_n_routes()</em> function above.</p>
<h2 id="future-work">Future Work</h2>
<p>I would love to expand this project to output all the itineraries overlayed onto a map, with timestamps of each node, and also add extensive sorting options like sorting by</p>
<ul>
<li><em>Highest Contingency Itineraries</em><br>
In case a ship gets cancelled, possibility to hop onto another ship and change itinerary without much hustle would be great.</li>
<li><em>Seat Availability</em><br>
Sorting out itineraries with maximum possible seats available for <em>n</em> passengers. (Seat Availability details on <a href="http://lakport.nic.in">lakport.nic.in</a> are not available for all ships at once. We need to check for availability for each ship on each voyage separately, protected by captcha.)</li>
</ul>

